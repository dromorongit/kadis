<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2"><i class="fas fa-plus me-2"></i>Add New Product</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            <a href="/products" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-1"></i>Back to Products
            </a>
        </div>
    </div>
</div>

<% if (errors && errors.length > 0) { %>
    <div class="alert alert-danger">
        <h6><i class="fas fa-exclamation-triangle me-2"></i>Please fix the following errors:</h6>
        <ul class="mb-0">
            <% errors.forEach(error => { %>
                <li><%= error.msg %></li>
            <% }) %>
        </ul>
    </div>
<% } %>

<form action="/products" method="POST" enctype="multipart/form-data" class="product-form">
    <div class="row">
        <!-- Basic Information -->
        <div class="col-lg-8">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Basic Information</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="id" class="form-label">Product ID <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="id" name="id"
                                   value="<%= product.id || '' %>" required>
                            <div class="form-text">Unique identifier for the product</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="category" class="form-label">Category <span class="text-danger">*</span></label>
                            <select class="form-select" id="category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="Men" <%= product.category === 'Men' ? 'selected' : '' %>>Men</option>
                                <option value="Women" <%= product.category === 'Women' ? 'selected' : '' %>>Women</option>
                            </select>
                        </div>
                    </div>



                    <div class="mb-3">
                        <label for="title" class="form-label">Product Title <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="title" name="title"
                               value="<%= product.title || '' %>" required maxlength="200">
                    </div>

                    <div class="mb-3">
                        <label for="brand" class="form-label">Brand</label>
                        <input type="text" class="form-control" id="brand" name="brand"
                               value="<%= product.brand || '' %>" maxlength="100">
                    </div>

                    <div class="mb-3">
                        <label for="shortDescription" class="form-label">Short Description <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="shortDescription" name="shortDescription"
                                  rows="2" required maxlength="300"><%= product.shortDescription || '' %></textarea>
                        <div class="form-text">Brief description (max 300 characters)</div>
                    </div>

                    <div class="mb-3">
                        <label for="longDescription" class="form-label">Long Description</label>
                        <textarea class="form-control" id="longDescription" name="longDescription"
                                  rows="4"><%= product.longDescription || '' %></textarea>
                        <div class="form-text">Detailed product description</div>
                    </div>
                </div>
            </div>

            <!-- Pricing -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-dollar-sign me-2"></i>Pricing</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="price" class="form-label">Regular Price <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <span class="input-group-text">₵</span>
                                <input type="number" class="form-control" id="price" name="price"
                                           value="<%= product.price || '' %>" step="1" min="0" required>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="oldPrice" class="form-label">Old Price</label>
                            <div class="input-group">
                                <span class="input-group-text">₵</span>
                                <input type="number" class="form-control" id="oldPrice" name="oldPrice"
                                           value="<%= product.oldPrice || '' %>" step="1" min="0">
                            </div>
                            <div class="form-text">For showing discounts</div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="promoPrice" class="form-label">Promo Price</label>
                            <div class="input-group">
                                <span class="input-group-text">₵</span>
                                <input type="number" class="form-control" id="promoPrice" name="promoPrice"
                                           value="<%= product.promoPrice || '' %>" step="1" min="0">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="isPromoActive" name="isPromoActive"
                                   <%= product.isPromoActive ? 'checked' : '' %>>
                            <label class="form-check-label" for="isPromoActive">
                                Enable Promo Price
                            </label>
                        </div>
                        <div class="form-text">Check to activate promotional pricing</div>
                    </div>
                </div>
            </div>

            <!-- Inventory & Options -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-warehouse me-2"></i>Inventory & Options</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="stockQuantity" class="form-label">Stock Quantity</label>
                            <input type="number" class="form-control" id="stockQuantity" name="stockQuantity"
                                   value="<%= product.stockQuantity || 0 %>" min="0">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="sizes" class="form-label">Sizes</label>
                            <input type="text" class="form-control" id="sizes" name="sizes"
                                   value="<%= product.sizes ? product.sizes.join(', ') : '' %>"
                                   placeholder="S, M, L, XL">
                            <div class="form-text">Comma-separated sizes (e.g., S, M, L, XL)</div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="tags" class="form-label">Tags</label>
                            <input type="text" class="form-control" id="tags" name="tags"
                                   value="<%= product.tags ? product.tags.join(', ') : '' %>"
                                   placeholder="fashion, casual, summer">
                            <div class="form-text">Comma-separated tags for search</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="material" class="form-label">Material</label>
                            <input type="text" class="form-control" id="material" name="material"
                                   value="<%= product.material || '' %>">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="careInstructions" class="form-label">Care Instructions</label>
                        <textarea class="form-control" id="careInstructions" name="careInstructions"
                                  rows="2"><%= product.careInstructions || '' %></textarea>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="inStock" name="inStock"
                                       <%= product.inStock !== false ? 'checked' : '' %>>
                                <label class="form-check-label" for="inStock">
                                    In Stock
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="featured" name="featured"
                                       <%= product.featured ? 'checked' : '' %>>
                                <label class="form-check-label" for="featured">
                                    Featured Product
                                </label>
                                <div class="form-text">Show on homepage featured section</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Images & Dimensions -->
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-images me-2"></i>Product Images</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="images" class="form-label">Product Images</label>
                        <input type="file" class="form-control" id="images" name="images" multiple accept="image/*">
                        <div class="form-text">Select multiple images (first image is main image, max 10 images, 5MB each)</div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-ruler-combined me-2"></i>Dimensions & Weight</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-4 mb-3">
                            <label for="length" class="form-label">Length (cm)</label>
                            <input type="number" class="form-control" id="length" name="dimensions[length]"
                                   value="<%= product.dimensions ? product.dimensions.length || '' : '' %>" step="0.1" min="0">
                        </div>
                        <div class="col-4 mb-3">
                            <label for="width" class="form-label">Width (cm)</label>
                            <input type="number" class="form-control" id="width" name="dimensions[width]"
                                   value="<%= product.dimensions ? product.dimensions.width || '' : '' %>" step="0.1" min="0">
                        </div>
                        <div class="col-4 mb-3">
                            <label for="height" class="form-label">Height (cm)</label>
                            <input type="number" class="form-control" id="height" name="dimensions[height]"
                                   value="<%= product.dimensions ? product.dimensions.height || '' : '' %>" step="0.1" min="0">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="weight" class="form-label">Weight (kg)</label>
                        <input type="number" class="form-control" id="weight" name="weight"
                               value="<%= product.weight || '' %>" step="0.01" min="0">
                    </div>
                </div>
            </div>

            <!-- Submit -->
            <div class="card">
                <div class="card-body">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-save me-2"></i>Create Product
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

<style>
.product-form .card {
    border: none;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
}

.product-form .card-header {
    background: #f8f9fa;
    border-bottom: 1px solid #e9ecef;
    border-radius: 10px 10px 0 0 !important;
    padding: 1rem 1.25rem;
}

.product-form .form-label {
    font-weight: 600;
    color: #495057;
    margin-bottom: 0.5rem;
}

.product-form .form-control,
.product-form .form-select {
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 0.75rem;
    font-size: 0.95rem;
    transition: all 0.3s ease;
}

.product-form .form-control:focus,
.product-form .form-select:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
}

.product-form .input-group-text {
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-right: none;
    color: #495057;
}

.product-form .input-group .form-control {
    border-left: none;
}

.product-form .input-group .form-control:focus {
    border-left: none;
    box-shadow: none;
}

.product-form .input-group:focus-within {
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
}

.product-form .form-check-input:checked {
    background-color: #667eea;
    border-color: #667eea;
}

.product-form .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.product-form .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
}

.text-danger {
    color: #dc3545 !important;
}

.form-text {
    font-size: 0.875rem;
    color: #6c757d;
}
</style>